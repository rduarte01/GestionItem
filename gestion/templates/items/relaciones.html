{% extends 'proyectos/base.html' %}


{% block volver_atras %}

{% endblock %}

{% block interno %}

<form method="post" >
    {% csrf_token %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h7 class="navy" > Relación Item</h7>
        <a class="btn btn-primary" href="{% url 'gestion:detallesFase' item.fase.id_Fase%}" role="button"><i class="fas fa-undo-alt"></i> Volver Atras</a>
    </div>
    <div class="card-body">
    <h7 class="navy" > * Seleccione un Item y la dirección que desea para la relación<br></h7>
    <h7 class="navy" > * Tenga en cuenta que:<br></h7>
    <h7 class="navy" > 1- No debe haber ciclos<br></h7>
    <h7 class="navy" > 2- Todos los items deben de contar con relación directa o indirecta a la fase 1<br></h7>
        <div class="content">

            <!-- Sección Superior -->
            <div class="row">

                <table class="table table-striped table-hover">
                    <thead>
                    <td>ITEM ACTUAL</td>
                    <td>DESCRIPCION</td>
                    <td>ESTADO</td>
                    <td>COSTO</td>
                    </thead>
                    <tbody>
                    <td><input class="form-control" placeholder="Ingrese nombre"  readonly  type="text" name="item_nombre" step="any" value="{{item.nombre}}" required></td>
                    <td><input class="form-control" placeholder="Ingrese descripción" readonly type="text" name="item_descripcion" step="any" value="{{item.descripcion}}" required></td>
                    <td><input class="form-control" type="text" name="item_estado" readonly value="{{item.estado}}" required></td>
                    <td><input class="form-control"  placeholder="Ingrese costo" readonly  type="number" name="item_costo" step="any" value="{{item.costo}}" required></td>
                    </tbody>
                </table>


                <table  id="addparts">
                    <tr>

                        <td>
                            <input class="form-control" placeholder="Ingrese nombre"  readonly  type="text" name="item_nombre" step="any" value="{{item.nombre}}" required>
                        </td>
                        <td>
                            <select name="direccion"  class="form-control">
                                <option value="0">Seleccione Dirección  ---> <--- </option>
                                <option value="<--">Inicio <--- Fin</option>
                                <option value="-->">Inicio ---> Fin</option>
                            </select>
                        </td>
                        <td>
                            <select name="item" id="enc_cliente" class="form-control">
                                <option value="0">Seleccione Item a Relacionar</option>
                                {% for item in todos %}
                                <option value="{{item.nombre}}">{{ item.nombre }} </option>
                                {% endfor %}
                            </select>
                        </td>

                    </tr>

                </table>

                    <div id="div_button">
                    <br>
                    <br>
                    <br>
                        <input type="button" class="btn btn-warning lg" name="addmore" value="+ Relaciones" id="addMore">
                        <button type="submit" class="btn btn-primary " ><i class="fa fa-check-circle"></i> Listo</button>
                    </div>
            </div>
            <!-- Fin Sección Superior -->
            <!-- Inicio Detalle -->
            <hr>
            <div class="row p-1">

                <div class="col-lg-12">
                <h7 class="navy" >Lista de relaciones del Item Actual:<h7 class="red" > {{item.nombre}}</h7></h7>
                    <table
                        data-toggle="table"
                        data-pagination="true"
                        data-search="true"
                        data-show-columns="true"
                        data-show-toggle="true"
                        data-show-fullscreen="true"
                        data-locale="es-NI"
                        >
                        <thead>
                            <th data-sortable="true" data-field="codigo">Item</th>

                            <th data-field="subtotal">Sentido</th>
                            <th data-field="descuento">Item actual</th>
                            <th data-field="descuentoi">Elimiar Relación</th>

                        </thead>
                        <tbody>
                            {% for items in inicio%}
                            <tr>
                                <td>{{ items.name  }}</td>

                                <td><center class="red" ><---</center></td>
                                <td>{{ item.nombre  }}</td>
                            <td>
                                <a type="button" class="btn btn-primary">

                                </a>
                            </td>
                            </tr>
                            {% endfor %}
                            {% for items in fin%}
                            <tr>
                                <td>{{ items.name  }}</td>

                                <td><center class="red" >---></center></td>
                                <td>{{ item.nombre  }}</td>

                            <td>
                                <center>
                                    <a type="button" href="#" class="btn btn-danger">
                                    x
                                    </a>
                                </center>
                            </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Fin Detalle -->
        </div>
    </div>
</div>
</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>

       $(document).ready(function() {

           var id = 1;

           // get item

           var item = $("#addparts");

           var before = $('#div_button');

           // initalize event click

          $('#addMore').on('click', function() {
               // clone addparts
               var clone = item.clone(true);
                   // remove id
                   clone.attr('id', '');
                   // add class duplicate
                   clone.attr('class', 'duplicate');
               // insert duplicate before button div
               before.before(clone);


          });

       });


</script>
{% endblock %}
